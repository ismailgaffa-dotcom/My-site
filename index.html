<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø·Ù‚Ø³ AI - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø°Ø§Ø± Ø§Ù„Ù…Ø¨ÙƒØ±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            margin: 0; font-family: 'Segoe UI', sans-serif;
            background: #0e1621; color: white;
            background-image: url('https://www.transparenttextures.com/patterns/shattered.png');
            height: 100vh; display: flex; flex-direction: column;
        }
        .header {
            background: #242f3d; padding: 15px; display: flex; align-items: center; gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5); border-bottom: 1px solid #2b5278;
        }
        .chat-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .bubble { max-width: 85%; padding: 12px 16px; border-radius: 15px; line-height: 1.6; font-size: 15px; }
        .ai { background: #2b5278; align-self: flex-start; border-bottom-right-radius: 2px; }
        .user { background: #182533; align-self: flex-end; border-bottom-left-radius: 2px; color: #8295ad; }
        
        .report-card { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 15px; margin-top: 10px; border-right: 4px solid #64b5f6; }
        .warning { color: #ff5252; font-weight: bold; background: rgba(255,82,82,0.1); padding: 8px; border-radius: 5px; margin-top: 10px; border: 1px dashed #ff5252; animation: blink 1.5s infinite; }
        @keyframes blink { 50% { opacity: 0.6; } }

        .input-area { background: #242f3d; padding: 15px; display: flex; gap: 10px; }
        input { flex: 1; background: #17212b; border: 1px solid #2f3b4a; border-radius: 25px; padding: 12px 20px; color: white; outline: none; }
        button { background: #5288c1; border: none; color: white; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; transition: 0.3s; }
        button:hover { background: #64b5f6; transform: scale(1.1); }
    </style>
</head>
<body>

    <div class="header">
        <div style="width:45px; height:45px; border-radius:50%; background:linear-gradient(45deg, #2b5278, #64b5f6); display:flex; align-items:center; justify-content:center; font-size:20px;">ğŸ›°ï¸</div>
        <div>
            <div style="font-weight: bold;">Ø§Ù„Ø·Ù‚Ø³ AI</div>
            <div style="font-size: 12px; color: #8295ad;">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø°Ø§Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ù…ØªØµÙ„</div>
        </div>
    </div>

    <div class="chat-container" id="chat">
        <div class="bubble ai">
            Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… <b>Ø§Ù„Ø·Ù‚Ø³ AI</b> Ø§Ù„Ù…ØªØ·ÙˆØ±. â›ˆï¸
            <br>Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„ØªØ­Ù„ÙŠÙ„ Ù…Ø®Ø§Ø·Ø± Ø§Ù„ÙÙŠØ¶Ø§Ù†Ø§ØªØŒ Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­ØŒ ÙˆØ§Ù„ØªÙ‚Ù„Ø¨Ø§Øª Ø§Ù„Ø¬ÙˆÙŠØ© Ø§Ù„Ù…ÙØ§Ø¬Ø¦Ø©.
            <br>Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ:
        </div>
    </div>

    <div class="input-area">
        <input type="text" id="cityInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø·Ù†Ø¬Ø©ØŒ Ø¨Ø§Ø±ÙŠØ³)..." onkeypress="if(event.key === 'Enter') startAnalysis()">
        <button onclick="startAnalysis()"><i class="fas fa-paper-plane"></i></button>
    </div>

    <script>
        async function startAnalysis() {
            const input = document.getElementById('cityInput');
            const city = input.value.trim();
            if(!city) return;

            addMsg('user', city);
            input.value = '';

            try {
                const geo = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&language=ar`);
                const geoData = await geo.json();
                if(!geoData.results) { addMsg('ai', 'âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§Ø³Ù….'); return; }

                const {latitude, longitude, name, country} = geoData.results[0];
                const weather = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&hourly=precipitation_probability,relativehumidity_2m&timezone=auto`);
                const data = await weather.json();

                const temp = data.current_weather.temperature;
                const wind = data.current_weather.windspeed;
                const rain = data.hourly.precipitation_probability[0];
                const humidity = data.hourly.relativehumidity_2m[0];

                let report = `<b>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙ†ÙŠ Ù„Ù…Ø¯ÙŠÙ†Ø© ${name} (${country}):</b><br>`;
                report += `<div class="report-card">`;
                report += `ğŸŒ¡ï¸ Ø§Ù„Ø­Ø±Ø§Ø±Ø©: ${temp}Â°C<br>`;
                report += `ğŸ’¨ Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­: ${wind} ÙƒÙ…/Ø³<br>`;
                report += `ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø©: ${humidity}%<br>`;
                report += `â˜” Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ø£Ù…Ø·Ø§Ø±: ${rain}%`;
                report += `</div>`;

                // Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„ØªØ­Ø°ÙŠØ±Ø§Øª
                let warnings = "";
                if(wind > 55) warnings += `<div class="warning">ğŸ“¢ Ø¥Ù†Ø°Ø§Ø±: Ø±ÙŠØ§Ø­ Ø¹Ø§ØªÙŠØ© Ù…ØªÙˆÙ‚Ø¹Ø©! ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø­Ø°Ø±.</div>`;
                if(rain > 75) warnings += `<div class="warning">âš ï¸ ØªØ­Ø°ÙŠØ±: Ø®Ø·Ø± ÙÙŠØ¶Ø§Ù†Ø§Øª Ù…Ø­ØªÙ…Ù„ Ù†ØªÙŠØ¬Ø© Ø£Ù…Ø·Ø§Ø± ØºØ²ÙŠØ±Ø©!</div>`;
                if(temp > 40) warnings += `<div class="warning">ğŸ”¥ ØªÙ†Ø¨ÙŠÙ‡: Ù…ÙˆØ¬Ø© Ø­Ø± Ø´Ø¯ÙŠØ¯Ø©ØŒ ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø±Ø¶ Ù„Ù„Ø´Ù…Ø³.</div>`;
                
                if(!warnings) report += `<br>âœ… Ø§Ù„Ù†Ø´Ø±Ø©: Ø§Ù„Ø£Ø¬ÙˆØ§Ø¡ Ù…Ø³ØªÙ‚Ø±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø®Ø§Ø·Ø± Ù…Ø­ØªÙ…Ù„Ø©.`;
                else report += warnings;

                addMsg('ai', report);
            } catch (e) { addMsg('ai', 'âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… Ø§Ù„Ø£Ø±ØµØ§Ø¯ Ø§Ù„Ø¬ÙˆÙŠØ©.'); }
        }

        function addMsg(type, text) {
            const chat = document.getElementById('chat');
            const div = document.createElement('div');
            div.className = `bubble ${type}`;
            div.innerHTML = text;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }
    </script>
</body>
</html>

